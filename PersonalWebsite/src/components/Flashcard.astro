---
/**
 * Flashcard Component
 *
 * An Astro component for defining flashcards with front and back content.
 * This component doesn't render anything visible - it's used to pass flashcard
 * data to the SpacedRepetition component.
 *
 * Usage:
 * <Flashcard id="card-1" front="Question?" back="Answer!" />
 *
 * With priority (higher number = higher priority, shown first):
 * <Flashcard id="card-important" front="Critical concept" back="Must learn first!" priority={100} />
 * <Flashcard id="card-normal" front="Regular concept" back="Learn this second" priority={10} />
 *
 * Cloze usage (minimal):
 * Front: "The mitochondria is the ... of the cell"
 * Back:  "The mitochondria is the powerhouse of the cell"
 * Specify the cloze answer so the back will highlight it:
 * <Flashcard id="cloze-1" front="The mitochondria is the ... of the cell" back="The mitochondria is the powerhouse of the cell" cloze="powerhouse" />
 *
 * Or with HTML content and cloze:
 * <Flashcard id="cloze-2" cloze="powerhouse">
 *   <Fragment slot="front">The mitochondria is the ... of the cell</Fragment>
 *   <Fragment slot="back">The mitochondria is the <strong>powerhouse</strong> of the cell</Fragment>
 * </Flashcard>
 */

interface Props {
    id: string;
    front?: string;
    back?: string;
    tags?: string[];
    source?: string;
    references?: string[];
    priority?: number; // Custom priority (higher = higher priority, default = 0)
    cloze?: string; // Optional cloze answer text to highlight in the back
}

const {
    id,
    front,
    back,
    tags = [],
    source,
    references = [],
    priority = 0,
    cloze = "",
} = Astro.props;

// Auto-detect source filename if not provided
let sourceFile = source;
if (!sourceFile) {
    sourceFile = "";
}
---

<div
    class="flashcard-definition"
    data-id={id}
    data-tags={JSON.stringify(tags)}
    data-source={sourceFile}
    data-references={JSON.stringify(references)}
    data-cloze={cloze}
    data-priority={priority}
    style="display: none;"
>
    {front && <div class="front-simple" data-content={front} />}
    {back && <div class="back-simple" data-content={back} />}

    <div class="front-slot">
        <slot name="front" />
    </div>

    <div class="back-slot">
        <slot name="back" />
    </div>
</div>
