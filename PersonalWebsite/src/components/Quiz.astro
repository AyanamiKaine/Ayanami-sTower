---
/**
 * Quiz Component
 *
 * An Astro component for defining multiple-choice quiz questions.
 * This component doesn't render anything visible - it's used to pass quiz
 * data to the SpacedRepetition component.
 *
 * Usage:
 * <Quiz
 *   id="quiz-1"
 *   question="What is 2 + 2?"
 *   options={["3", "4", "5", "6"]}
 *   correctIndex={1}
 *   tags={["math", "basics"]}
 * />
 *
 * With priority:
 * <Quiz
 *   id="quiz-important"
 *   question="Critical concept?"
 *   options={["A", "B", "C", "D"]}
 *   correctIndex={2}
 *   priority={100}
 * />
 */

interface Props {
    id: string;
    question: string;
    options: string[];
    correctIndex: number; // 0-based index of the correct answer
    tags?: string[];
    source?: string;
    references?: string[];
    priority?: number; // Custom priority (higher = higher priority, default = 0)
}

const {
    id,
    question,
    options,
    correctIndex,
    tags = [],
    source,
    references = [],
    priority = 0,
} = Astro.props;

// Auto-detect source filename if not provided
let sourceFile = source;
if (!sourceFile) {
    sourceFile = "";
}
---

<div
    class="quiz-definition"
    data-id={id}
    data-question={question}
    data-options={JSON.stringify(options)}
    data-correct-index={correctIndex}
    data-tags={JSON.stringify(tags)}
    data-source={sourceFile}
    data-references={JSON.stringify(references)}
    data-priority={priority}
    style="display: none;"
>
</div>
